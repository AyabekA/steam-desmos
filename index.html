<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>STEAM × Desmos — Математика как исследование</title>
    <meta name="description" content="STEAM и Desmos: визуализация, исследование, творчество. Галерея работ учеников (Desmos) и видеоматериалы." />
    <style>
        :root{
            --bg: #fbf7ef;
            --paper: #ffffff;
            --ink: #0f2a3d;
            --muted: #5b6b77;
            --line: rgba(15,42,61,.12);
            --accent: #caa24b;
            --accent2:#2b74b6;
            --shadow: 0 14px 40px rgba(15,42,61,.10);
            --radius: 18px;
            --radius2: 26px;
            --max: 1100px;
        }
        *{ box-sizing: border-box; }
        html{ scroll-behavior:smooth; }
        body{
            margin:0;
            font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans", "Liberation Sans", sans-serif;
            color: var(--ink);
            background: radial-gradient(1200px 700px at 20% -10%, rgba(43,116,182,.10), transparent 60%),
            radial-gradient(900px 600px at 90% 20%, rgba(202,162,75,.12), transparent 55%),
            var(--bg);
            overflow-x:hidden;
        }
        a{ color:inherit; text-decoration:none; }
        .container{ max-width: var(--max); margin:0 auto; padding: 0 18px; }

        /* Motion safety */
        @media (prefers-reduced-motion: reduce){
            html{ scroll-behavior:auto; }
            *{ animation:none !important; transition:none !important; }
        }

        /* Reveal animation */
        .reveal{
            opacity: 0;
            transform: translateY(14px);
            transition: opacity .6s ease, transform .6s ease;
            will-change: opacity, transform;
        }
        .reveal.in{
            opacity: 1;
            transform: translateY(0);
        }
        .stagger > *{
            transition-delay: var(--d, 0ms);
        }

        header{
            position: sticky; top:0; z-index: 50;
            backdrop-filter: blur(10px);
            background: rgba(251,247,239,.82);
            border-bottom: 1px solid var(--line);
        }
        .nav{
            display:flex; align-items:center; justify-content:space-between;
            padding: 12px 0;
            gap: 14px;
        }
        .brand{
            display:flex; align-items:center; gap:12px;
            min-width: 240px;
        }
        .mark{
            width: 38px; height: 38px; border-radius: 14px;
            background: linear-gradient(145deg, rgba(43,116,182,.20), rgba(202,162,75,.22));
            border: 1px solid rgba(15,42,61,.10);
            display:grid; place-items:center;
            box-shadow: 0 10px 22px rgba(15,42,61,.10);
            transition: transform .2s ease;
        }
        .mark:hover{ transform: translateY(-1px); }
        .mark svg{ width: 22px; height: 22px; }
        .brand h1{ font-size: 14px; margin:0; letter-spacing:.2px; }
        .brand small{ display:block; color: var(--muted); margin-top:2px; font-size: 12px; }

        nav ul{
            list-style:none; display:flex; gap: 16px; margin:0; padding:0;
            align-items:center;
        }
        nav a{
            font-size: 13px;
            color: rgba(15,42,61,.86);
            padding: 8px 10px;
            border-radius: 12px;
            border: 1px solid transparent;
            transition: background .18s ease, border-color .18s ease, transform .18s ease;
        }
        nav a:hover{
            background: rgba(43,116,182,.08);
            border-color: rgba(43,116,182,.14);
            transform: translateY(-1px);
        }
        .nav-actions{ display:flex; gap:10px; align-items:center; }
        .btn{
            display:inline-flex; align-items:center; justify-content:center;
            gap: 8px;
            padding: 9px 12px;
            border-radius: 14px;
            border: 1px solid rgba(15,42,61,.14);
            background: rgba(255,255,255,.72);
            box-shadow: 0 10px 26px rgba(15,42,61,.08);
            font-size: 13px;
            cursor:pointer;
            user-select:none;
            transition: transform .18s ease, box-shadow .18s ease, background .18s ease, border-color .18s ease;
        }
        .btn:hover{ transform: translateY(-2px); box-shadow: 0 14px 34px rgba(15,42,61,.12); }
        .btn:active{ transform: translateY(0); }
        .btn.primary{
            background: linear-gradient(145deg, rgba(43,116,182,.15), rgba(202,162,75,.16));
            border-color: rgba(15,42,61,.12);
        }
        .btn.ghost{
            background: rgba(255,255,255,.55);
        }
        .burger{ display:none; }

        .mobile{ display:none; padding: 10px 0 14px; }
        .mobile.open{ display:block; }
        .mobile a{
            display:block; padding: 10px 10px; border-radius: 14px;
            border:1px solid rgba(15,42,61,.10); background: rgba(255,255,255,.65);
            margin-top: 8px;
            transition: transform .18s ease;
        }
        .mobile a:hover{ transform: translateY(-1px); }

        section{ padding: 18px 0; }
        .section-head{
            display:flex; align-items:flex-end; justify-content:space-between;
            gap: 14px;
            margin: 16px 0 12px;
        }
        .section-head h2{
            margin:0;
            font-size: 22px;
            letter-spacing: -0.2px;
        }
        .section-head p{
            margin:0;
            color: var(--muted);
            font-size: 13px;
            max-width: 68ch;
            line-height: 1.45;
        }

        .card{
            background: rgba(255,255,255,.78);
            border: 1px solid rgba(15,42,61,.12);
            border-radius: var(--radius2);
            box-shadow: var(--shadow);
            transition: transform .20s ease, box-shadow .20s ease;
        }
        .card.hover:hover{ transform: translateY(-2px); box-shadow: 0 18px 52px rgba(15,42,61,.14); }

        /* Block 1 (Info) */
        .hero{ padding: 34px 0 10px; }
        .hero-grid{
            display:grid; gap: 18px;
            grid-template-columns: 1.15fr .85fr;
            align-items: stretch;
        }
        .hero-left{ padding: 24px 24px 22px; position:relative; overflow:hidden; }
        .hero-left:before{
            content:"";
            position:absolute; inset:-2px;
            background:
                    radial-gradient(600px 260px at 20% 15%, rgba(43,116,182,.14), transparent 60%),
                    radial-gradient(560px 260px at 90% 30%, rgba(202,162,75,.16), transparent 55%);
            pointer-events:none;
        }
        .hero-left > *{ position:relative; }
        .kicker{
            display:inline-flex; gap: 10px; align-items:center;
            padding: 6px 10px;
            border-radius: 999px;
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(251,247,239,.92);
            font-size: 12px;
            color: rgba(15,42,61,.85);
        }
        .dot{
            width: 8px; height:8px; border-radius: 50%;
            background: var(--accent2);
            box-shadow: 0 0 0 4px rgba(43,116,182,.12);
        }
        .hero h2{
            margin: 14px 0 10px;
            font-size: 34px;
            line-height: 1.06;
            letter-spacing: -0.6px;
        }
        .hero p{
            margin: 0 0 16px;
            color: var(--muted);
            font-size: 15px;
            line-height: 1.55;
            max-width: 60ch;
        }
        .hero-tags{
            display:flex; flex-wrap:wrap; gap:10px;
            margin-top: 14px;
        }
        .tag{
            font-size: 12px;
            padding: 7px 10px;
            border-radius: 999px;
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(255,255,255,.75);
            color: rgba(15,42,61,.82);
        }
        .tag strong{ color: var(--ink); }

        .hero-right{
            padding: 18px;
            display:flex;
            flex-direction:column;
            gap: 12px;
        }

        .hero-media{
            border-radius: var(--radius2);
            border: 1px solid rgba(15,42,61,.12);
            overflow:hidden;
            background: rgba(255,255,255,.72);
            box-shadow: 0 12px 34px rgba(15,42,61,.10);
            position:relative;
        }
        .hero-media img{
            width:100%;
            height: 240px;
            object-fit: cover;
            display:block;
            transform: scale(1.01);
        }
        .hero-media .badge{
            position:absolute;
            left: 12px;
            bottom: 12px;
            padding: 7px 10px;
            border-radius: 999px;
            border: 1px solid rgba(255,255,255,.55);
            background: rgba(15,42,61,.52);
            color: rgba(255,255,255,.92);
            font-size: 12px;
            backdrop-filter: blur(6px);
        }
        .hero-media .shine{
            position:absolute;
            inset:-40% -40% auto auto;
            width: 240px;
            height: 240px;
            background: radial-gradient(circle at 30% 30%, rgba(202,162,75,.35), transparent 60%);
            transform: rotate(20deg);
            pointer-events:none;
        }

        .mini{
            padding: 14px;
            border-radius: var(--radius);
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(255,255,255,.72);
            transition: transform .18s ease, box-shadow .18s ease;
        }
        .mini:hover{ transform: translateY(-2px); box-shadow: 0 14px 34px rgba(15,42,61,.10); }
        .mini h3{ margin:0 0 8px; font-size: 13px; letter-spacing:.2px; }
        .mini p{ margin:0; color: var(--muted); font-size: 13px; line-height: 1.5; }
        .mini strong{ color: var(--ink); }

        /* Videos */
        .grid-3{ display:grid; grid-template-columns: repeat(3, 1fr); gap: 14px; }
        .video-card{
            border-radius: var(--radius2);
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(255,255,255,.78);
            box-shadow: 0 12px 34px rgba(15,42,61,.10);
            overflow:hidden;
            display:flex;
            flex-direction:column;
            min-height: 320px;
            transition: transform .20s ease, box-shadow .20s ease;
        }
        .video-card:hover{ transform: translateY(-2px); box-shadow: 0 18px 52px rgba(15,42,61,.14); }
        .video-head{
            padding: 14px 14px 10px;
            display:flex; justify-content:space-between; gap: 12px;
            align-items:flex-start;
        }
        .video-title{
            margin:0;
            font-size: 14px;
            letter-spacing:.1px;
            line-height: 1.25;
        }
        .video-meta{
            margin-top: 6px;
            color: var(--muted);
            font-size: 12px;
            display:flex; flex-wrap:wrap; gap: 8px;
        }
        .pill{
            display:inline-flex; align-items:center; gap: 6px;
            padding: 5px 8px;
            border-radius: 999px;
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(251,247,239,.75);
            color: rgba(15,42,61,.80);
        }
        .video-body{
            padding: 0 14px 14px;
            display:flex; flex-direction:column; gap: 10px;
            flex: 1;
        }
        .thumb{
            border-radius: 16px;
            border: 1px solid rgba(15,42,61,.12);
            overflow:hidden;
            background-size: cover;
            background-position: center;
            min-height: 190px;
            position:relative;
            cursor:pointer;
        }
        .thumb .play{
            position:absolute; inset:0;
            display:grid; place-items:center;
            background: linear-gradient(180deg, rgba(15,42,61,.05), rgba(15,42,61,.20));
            transition: background .18s ease;
        }
        .thumb:hover .play{ background: linear-gradient(180deg, rgba(15,42,61,.04), rgba(15,42,61,.24)); }
        .play-btn{
            width: 64px; height: 64px;
            border-radius: 22px;
            border: 1px solid rgba(255,255,255,.55);
            background: rgba(15,42,61,.50);
            backdrop-filter: blur(6px);
            display:grid; place-items:center;
            box-shadow: 0 12px 30px rgba(15,42,61,.18);
            transform: translateY(0);
            transition: transform .18s ease;
        }
        .thumb:hover .play-btn{ transform: translateY(-2px); }
        .play-btn svg{ width: 26px; height: 26px; }
        .yt-frame{
            width:100%;
            height: 190px;
            border:0;
            display:block;
            background:white;
        }

        /* Gallery */
        .gallery{ padding: 16px; }
        .toolbar{
            display:flex; flex-wrap:wrap; gap: 10px;
            align-items:center;
            justify-content:space-between;
            margin: 10px 0 14px;
        }
        .filters{
            display:flex; flex-wrap:wrap; gap: 10px; align-items:center;
        }
        .input{
            display:flex; align-items:center; gap: 10px;
            padding: 10px 12px;
            border-radius: 14px;
            border: 1px solid rgba(15,42,61,.14);
            background: rgba(255,255,255,.78);
            min-width: 260px;
        }
        .input input{
            border:none; outline:none; background: transparent;
            width: 100%;
            font-size: 13px;
        }
        select{
            border: 1px solid rgba(15,42,61,.14);
            background: rgba(255,255,255,.78);
            padding: 10px 12px;
            border-radius: 14px;
            font-size: 13px;
            outline:none;
        }
        .work-grid{
            display:grid; gap: 14px;
            grid-template-columns: repeat(2, 1fr);
        }
        .work{
            border-radius: var(--radius2);
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(255,255,255,.78);
            overflow:hidden;
            box-shadow: 0 12px 34px rgba(15,42,61,.10);
            display:flex;
            flex-direction:column;
            min-height: 380px;
            transition: transform .20s ease, box-shadow .20s ease;
        }
        .work:hover{ transform: translateY(-2px); box-shadow: 0 18px 52px rgba(15,42,61,.14); }
        .work-head{
            padding: 14px 14px 10px;
            display:flex; justify-content:space-between; gap: 12px;
            align-items:flex-start;
        }
        .work h3{ margin:0; font-size: 14px; letter-spacing:.1px; }
        .meta{
            margin-top: 6px;
            color: var(--muted);
            font-size: 12px;
            display:flex; flex-wrap:wrap; gap: 8px;
        }
        .work-actions{ display:flex; gap: 8px; flex-wrap:wrap; justify-content:flex-end; }
        .work-body{
            padding: 0 14px 14px;
            display:flex; flex-direction:column; gap: 10px;
            flex: 1;
        }
        .desc{
            color: var(--muted);
            font-size: 13px;
            line-height: 1.55;
            min-height: 42px;
        }

        /* Desmos frame optimized */
        .frame{
            border-radius: 16px;
            border: 1px solid rgba(15,42,61,.12);
            overflow:hidden;
            background: radial-gradient(600px 260px at 20% 20%, rgba(43,116,182,.10), transparent 60%),
            radial-gradient(560px 260px at 90% 30%, rgba(202,162,75,.12), transparent 55%),
            rgba(255,255,255,.70);
            min-height: 260px;
            position:relative;
        }
        iframe.desmos{
            width: 100%;
            height: 260px;
            border: 0;
            display:block;
            background: white;
        }
        .frame-placeholder{
            position:absolute; inset:0;
            display:grid; place-items:center;
            padding: 14px;
            background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.65));
            backdrop-filter: blur(8px);
            border-top: 1px solid rgba(255,255,255,.25);
        }
        .ph-inner{
            width: min(360px, 100%);
            padding: 14px;
            border-radius: 18px;
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(255,255,255,.85);
            box-shadow: 0 14px 34px rgba(15,42,61,.12);
            text-align:center;
        }
        .ph-title{
            font-size: 13px;
            font-weight: 650;
            margin-bottom: 6px;
            color: rgba(15,42,61,.86);
        }
        .ph-sub{
            font-size: 12px;
            color: rgba(15,42,61,.60);
            line-height: 1.4;
            margin-bottom: 12px;
        }

        /* Contacts */
        footer{ padding: 22px 0 34px; }
        .contact{
            padding: 16px;
            display:grid;
            grid-template-columns: 1.1fr .9fr;
            gap: 14px;
            align-items: stretch;
        }
        .contact .left, .contact .right{
            padding: 16px;
            border-radius: var(--radius2);
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(255,255,255,.78);
            transition: transform .20s ease, box-shadow .20s ease;
        }
        .contact .left:hover, .contact .right:hover{
            transform: translateY(-2px);
            box-shadow: 0 18px 52px rgba(15,42,61,.14);
        }
        .contact h3{ margin:0 0 10px; font-size: 16px; }
        .contact p{ margin:0; color: var(--muted); font-size: 13px; line-height: 1.55; }

        .author{
            display:flex;
            gap: 12px;
            align-items:center;
            margin-bottom: 12px;
        }
        .avatar{
            width: 56px;
            height: 56px;
            border-radius: 20px;
            border: 1px solid rgba(15,42,61,.12);
            overflow:hidden;
            background: rgba(251,247,239,.85);
            flex: 0 0 auto;
        }
        .avatar img{
            width:100%;
            height:100%;
            object-fit: cover;
            display:block;
        }
        .author-name{
            font-size: 15px;
            font-weight: 700;
            letter-spacing: .1px;
            margin:0;
        }
        .author-sub{
            margin-top: 4px;
            color: rgba(15,42,61,.62);
            font-size: 12px;
        }

        .contact-lines{
            display:grid;
            gap: 10px;
            margin-top: 12px;
        }
        .line{
            display:flex;
            gap: 10px;
            align-items:center;
            padding: 10px 12px;
            border-radius: 16px;
            border: 1px solid rgba(15,42,61,.12);
            background: rgba(251,247,239,.72);
            cursor:pointer;
            transition: transform .18s ease, box-shadow .18s ease;
        }
        .line:hover{ transform: translateY(-2px); box-shadow: 0 12px 28px rgba(15,42,61,.10); }
        .line svg{ width: 18px; height: 18px; flex: 0 0 auto; }
        .line span{
            font-size: 13px;
            color: rgba(15,42,61,.86);
            word-break: break-word;
        }

        .footnote{
            margin-top: 12px;
            color: rgba(15,42,61,.62);
            font-size: 12px;
            line-height: 1.45;
        }

        /* Modal */
        .modal{
            position: fixed;
            inset: 0;
            z-index: 1000;
            display:none;
            align-items:center;
            justify-content:center;
            padding: 18px;
            background: rgba(15,42,61,.40);
            backdrop-filter: blur(6px);
        }
        .modal.open{ display:flex; }
        .modal-card{
            width: min(820px, 100%);
            border-radius: 24px;
            border: 1px solid rgba(255,255,255,.18);
            background: rgba(255,255,255,.92);
            box-shadow: 0 18px 60px rgba(15,42,61,.22);
            overflow:hidden;
            transform: translateY(6px);
            animation: pop .22s ease forwards;
        }
        @keyframes pop{
            to{ transform: translateY(0); }
        }
        .modal-head{
            padding: 14px 16px;
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap: 10px;
            border-bottom: 1px solid rgba(15,42,61,.10);
            background: linear-gradient(145deg, rgba(43,116,182,.10), rgba(202,162,75,.10));
        }
        .modal-head h3{
            margin:0;
            font-size: 15px;
            letter-spacing:.1px;
        }
        .modal-body{
            padding: 16px;
            display:grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .field{
            display:flex;
            flex-direction:column;
            gap: 6px;
        }
        .field label{
            font-size: 12px;
            color: rgba(15,42,61,.75);
        }
        .field input, .field textarea{
            border: 1px solid rgba(15,42,61,.14);
            background: rgba(255,255,255,.95);
            border-radius: 14px;
            padding: 10px 12px;
            font-size: 13px;
            outline:none;
            width:100%;
            transition: box-shadow .18s ease, border-color .18s ease;
        }
        .field input:focus, .field textarea:focus{
            border-color: rgba(43,116,182,.28);
            box-shadow: 0 0 0 4px rgba(43,116,182,.10);
        }
        .field textarea{
            min-height: 110px;
            resize: vertical;
        }
        .modal-foot{
            padding: 14px 16px;
            border-top: 1px solid rgba(15,42,61,.10);
            display:flex;
            gap: 10px;
            justify-content:flex-end;
            flex-wrap:wrap;
            background: rgba(251,247,239,.65);
        }
        .hint{
            padding: 0 16px 16px;
            color: rgba(15,42,61,.62);
            font-size: 12px;
            line-height: 1.45;
        }

        /* Floating */
        .to-top{
            position: fixed;
            right: 16px;
            bottom: 16px;
            opacity: 0;
            pointer-events:none;
            transform: translateY(8px);
            transition: all .2s ease;
            z-index: 60;
        }
        .to-top.show{
            opacity: 1;
            pointer-events:auto;
            transform: translateY(0);
        }

        @media (max-width: 980px){
            .hero-grid{ grid-template-columns: 1fr; }
            .grid-3{ grid-template-columns: 1fr; }
            .work-grid{ grid-template-columns: 1fr; }
            .contact{ grid-template-columns: 1fr; }
            .brand{ min-width: auto; }
            nav ul{ display:none; }
            .burger{ display:inline-flex; }
            .mobile{ display:none; }
            .modal-body{ grid-template-columns: 1fr; }
            .hero-media img{ height: 220px; }
        }
    </style>
</head>

<body>
<div id="top"></div>

<header>
    <div class="container">
        <div class="nav">
            <div class="brand">
                <div class="mark" aria-hidden="true">
                    <svg viewBox="0 0 24 24" fill="none">
                        <path d="M5 16c2.8-7.5 11.2-7.5 14 0" stroke="rgba(15,42,61,.9)" stroke-width="1.8" stroke-linecap="round"/>
                        <path d="M7 8c2.2 2.8 7.8 2.8 10 0" stroke="rgba(15,42,61,.75)" stroke-width="1.8" stroke-linecap="round"/>
                        <path d="M12 4v16" stroke="rgba(202,162,75,.85)" stroke-width="1.8" stroke-linecap="round"/>
                    </svg>
                </div>
                <div>
                    <h1>STEAM × Desmos</h1>
                    <small>Математика как исследование и творчество</small>
                </div>
            </div>

            <nav aria-label="Основная навигация">
                <ul>
                    <li><a href="#info">Информация</a></li>
                    <li><a href="#materials">Видеоматериалы</a></li>
                    <li><a href="#works">Галерея Desmos</a></li>
                    <li><a href="#contact">Контакты</a></li>
                </ul>
            </nav>

            <div class="nav-actions">
                <button class="btn burger" id="burger" aria-label="Открыть меню" type="button">
                    <span>Меню</span>
                </button>
                <button class="btn primary" id="openSubmitTop" type="button">
                    <span>Отправить работу</span>
                </button>
            </div>
        </div>

        <div class="mobile" id="mobileNav" aria-label="Мобильная навигация">
            <a href="#info">Информация</a>
            <a href="#materials">Видеоматериалы</a>
            <a href="#works">Галерея Desmos</a>
            <a href="#contact">Контакты</a>
        </div>
    </div>
</header>

<main>
    <!-- 1) INFO -->
    <section class="hero" id="info">
        <div class="container">
            <div class="hero-grid">
                <div class="card hover hero-left reveal">
                    <div class="kicker"><span class="dot"></span> STEAM-подход и Desmos для 7–12 классов</div>
                    <h2>Математика становится понятной, когда её можно увидеть и исследовать</h2>
                    <p>
                        Визуальные эксперименты в Desmos переводят формулы в смысл: ученик управляет параметрами,
                        наблюдает закономерности и превращает результаты в аккуратные графические проекты.
                    </p>

                    <div class="hero-tags stagger" aria-label="Ключевые акценты">
                        <div class="tag" style="--d:60ms"><strong>Визуализация</strong> вместо заучивания</div>
                        <div class="tag" style="--d:120ms"><strong>Исследование</strong> через параметры</div>
                        <div class="tag" style="--d:180ms"><strong>Творчество</strong> как индикатор понимания</div>
                        <div class="tag" style="--d:240ms"><strong>Проектность</strong> и защита результата</div>
                    </div>

                    <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:16px;">
                        <a class="btn" href="#materials">Перейти к видео</a>
                        <a class="btn ghost" href="#works">Открыть галерею</a>
                    </div>
                </div>

                <div class="card hover hero-right reveal">
                    <!-- Work image in first block -->
                    <div class="hero-media reveal" style="transition-delay:80ms">
                        <div class="shine" aria-hidden="true"></div>
                        <img src="assets/work.jpg" alt="Desmos-art: пример работы" loading="lazy">
                        <div class="badge">Desmos-art: пример работы</div>
                    </div>

                    <div class="mini reveal" style="transition-delay:120ms">
                        <h3>Что происходит на уроке</h3>
                        <p><strong>Один параметр → новый смысл</strong>: ученик меняет k и b, видит эффект и объясняет вывод.</p>
                    </div>
                    <div class="mini reveal" style="transition-delay:160ms">
                        <h3>Что получается на выходе</h3>
                        <p>Графические проекты на основе функций: симметрия, преобразования, композиция, сюжет.</p>
                    </div>
                    <div class="mini reveal" style="transition-delay:200ms">
                        <h3>Что это развивает</h3>
                        <p>Критическое мышление, творческое конструирование, уверенность в решениях, аргументацию.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 2) VIDEOS -->
    <section id="materials">
        <div class="container">
            <div class="section-head reveal">
                <div>
                    <h2>Видеоматериалы для изучения Desmos</h2>
                    <p>Подборка роликов: старт, создание графиков, оформление и цветовые настройки.</p>
                </div>
            </div>

            <div class="grid-3" id="videoGrid"></div>
        </div>
    </section>

    <!-- 3) GALLERY -->
    <section id="works">
        <div class="container">
            <div class="section-head reveal">
                <div>
                    <h2>Галерея работ учеников (Desmos)</h2>
                    <p>Поиск и фильтры по ученику, классу и группе. Работы оптимизированы: графики подгружаются при прокрутке.</p>
                </div>
            </div>

            <div class="card hover gallery reveal">
                <div class="toolbar">
                    <div class="filters">
                        <div class="input" title="Поиск по ученику, классу или номеру">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                                <path d="M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z" stroke="rgba(15,42,61,.70)" stroke-width="1.8"/>
                                <path d="M16.5 16.5 21 21" stroke="rgba(15,42,61,.70)" stroke-width="1.8" stroke-linecap="round"/>
                            </svg>
                            <input id="q" type="search" placeholder="Поиск: Еркежан, 9Н-2, №5…" />
                        </div>

                        <select id="grade">
                            <option value="">Все классы</option>
                            <option value="8">8 класс</option>
                            <option value="9">9 класс</option>
                            <option value="10">10 класс</option>
                            <option value="11">11 класс</option>
                            <option value="12">12 класс</option>
                        </select>

                        <select id="group">
                            <option value="">Все группы</option>
                            <option value="1">Группа 1</option>
                            <option value="2">Группа 2</option>
                            <option value="3">Группа 3</option>
                        </select>
                    </div>

                    <div style="display:flex; gap:10px; align-items:center; flex-wrap:wrap;">
                        <button class="btn" id="reset" type="button">Сброс</button>
                        <button class="btn primary" id="openSubmit" type="button">Отправить работу</button>
                        <div style="color:var(--muted); font-size:12px;">
                            Показано: <b id="count">0</b>
                        </div>
                    </div>
                </div>

                <div class="work-grid" id="workGrid" aria-live="polite"></div>
            </div>
        </div>
    </section>
</main>

<!-- 4) CONTACTS -->
<footer id="contact">
    <div class="container">
        <div class="section-head reveal">
            <div>
                <h2>Контакты</h2>
                <p>Нажмите на строку, чтобы скопировать.</p>
            </div>
        </div>

        <div class="contact">
            <div class="left reveal">
                <h3>О проекте</h3>
                <p>
                    STEAM и Desmos: развитие исследовательских и творческих навыков учащихся через визуализацию,
                    параметризацию и проектную работу. Галерея показывает реальные ученические проекты.
                </p>
                <div class="footnote">© STEAM × Desmos</div>
            </div>

            <div class="right reveal">
                <div class="author">
                    <div class="avatar" aria-hidden="true">
                        <img src="assets/author.svg" alt="Фото автора" loading="lazy">
                    </div>
                    <div>
                        <div class="author-name">Раисова Бакытгуль Токтасыновна</div>
                        <div class="author-sub">Назарбаев Интеллектуальная школа ФМН, г. Усть-Каменогорск</div>
                    </div>
                </div>

                <div class="contact-lines">
                    <div class="line" data-copy="raissova_b@ukk.nis.edu.kz" role="button" tabindex="0">
                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path d="M4 6h16v12H4z" stroke="rgba(15,42,61,.78)" stroke-width="1.6"/>
                            <path d="M4 7l8 6 8-6" stroke="rgba(43,116,182,.85)" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>raissova_b@ukk.nis.edu.kz</span>
                    </div>

                    <div class="line" data-copy="+7 777 293 6105" role="button" tabindex="0">
                        <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
                            <path d="M6.5 3.5l3 2-1.5 3c1.2 2.4 3.1 4.3 5.5 5.5l3-1.5 2 3c.4.6.2 1.4-.4 1.8-1.6 1-3.6 1.2-5.4.6-4.8-1.6-8.8-5.6-10.4-10.4-.6-1.8-.4-3.8.6-5.4.4-.6 1.2-.8 1.8-.4z"
                                  stroke="rgba(15,42,61,.78)" stroke-width="1.6" stroke-linejoin="round"/>
                        </svg>
                        <span>+7 777 293 6105</span>
                    </div>

                    <button class="btn primary" id="openSubmitContact" type="button" style="width:100%; justify-content:center;">
                        Отправить работу
                    </button>
                </div>

                <div class="footnote">Текст для отправки сформируется автоматически (WhatsApp или Email).</div>
            </div>
        </div>
    </div>
</footer>

<a class="btn to-top" id="toTop" href="#top" aria-label="Наверх">Наверх</a>

<!-- Submit modal -->
<div class="modal" id="submitModal" role="dialog" aria-modal="true" aria-labelledby="submitTitle">
    <div class="modal-card">
        <div class="modal-head">
            <h3 id="submitTitle">Отправить работу (Desmos)</h3>
            <button class="btn" id="closeModal" type="button">Закрыть</button>
        </div>

        <div class="modal-body">
            <div class="field">
                <label for="sName">Имя и фамилия ученика</label>
                <input id="sName" type="text" placeholder="Например: Зекенова Еркежан" />
            </div>

            <div class="field">
                <label for="sClass">Класс</label>
                <input id="sClass" type="text" placeholder="Например: 9Н" />
            </div>

            <div class="field">
                <label for="sGroup">Группа (если есть)</label>
                <input id="sGroup" type="text" placeholder="Например: 2" />
            </div>

            <div class="field">
                <label for="sLink">Ссылка Desmos</label>
                <input id="sLink" type="url" placeholder="https://www.desmos.com/calculator/..." />
            </div>

            <div class="field" style="grid-column: 1 / -1;">
                <label for="sDesc">Краткое описание (по желанию)</label>
                <textarea id="sDesc" placeholder="Коротко: какие функции использованы, симметрия, идея работы и т.д."></textarea>
            </div>
        </div>

        <div class="hint" id="submitHint"></div>

        <div class="modal-foot">
            <button class="btn" id="copyText" type="button">Скопировать текст</button>
            <button class="btn" id="sendEmail" type="button">Email</button>
            <button class="btn primary" id="sendWhatsApp" type="button">WhatsApp</button>
        </div>
    </div>
</div>

<!-- Fallback JSON -->
<script id="studentsData" type="application/json">[]</script>
<script id="videosData" type="application/json">[]</script>

<script>
    const CONFIG = {
        whatsappPhone: "77772936105",
        email: "raissova_b@ukk.nis.edu.kz"
    };

    const el = (tag, attrs={}, children=[]) => {
        const node = document.createElement(tag);
        for (const [k,v] of Object.entries(attrs)){
            if (k === "class") node.className = v;
            else if (k === "html") node.innerHTML = v;
            else node.setAttribute(k, v);
        }
        for (const c of children) node.appendChild(typeof c === "string" ? document.createTextNode(c) : c);
        return node;
    };

    const toast = (() => {
        let timer;
        return (msg) => {
            let t = document.getElementById("toast");
            if (!t){
                t = document.createElement("div");
                t.id = "toast";
                t.style.position = "fixed";
                t.style.left = "16px";
                t.style.bottom = "16px";
                t.style.padding = "10px 12px";
                t.style.borderRadius = "14px";
                t.style.border = "1px solid rgba(15,42,61,.14)";
                t.style.background = "rgba(255,255,255,.92)";
                t.style.boxShadow = "0 12px 34px rgba(15,42,61,.12)";
                t.style.color = "rgba(15,42,61,.86)";
                t.style.fontSize = "13px";
                t.style.zIndex = "2000";
                document.body.appendChild(t);
            }
            t.textContent = msg;
            t.style.opacity = "1";
            clearTimeout(timer);
            timer = setTimeout(() => { t.style.opacity = "0"; }, 1600);
        };
    })();

    async function loadJson(url, fallbackScriptId){
        try{
            const r = await fetch(url, { cache: "no-store" });
            if (!r.ok) throw new Error("HTTP " + r.status);
            return await r.json();
        }catch(e){
            const s = document.getElementById(fallbackScriptId);
            if (s && s.textContent.trim()){
                try { return JSON.parse(s.textContent); } catch(_) {}
            }
            return [];
        }
    }

    function parseGrade(classLabel){
        const m = String(classLabel || "").match(/^(\d{1,2})/);
        return m ? m[1] : "";
    }

    function normalizeDesmosEmbed(url){
        if (!url) return "";
        try{
            const u = new URL(url);
            const p = u.pathname.toLowerCase().includes("/calculator/")
                ? u.pathname
                : u.pathname.replace("/Calculator/", "/calculator/");
            const id = p.split("/").filter(Boolean).pop();
            const lang = u.searchParams.get("lang") || "ru";
            return `https://www.desmos.com/calculator/${id}?embed&lang=${encodeURIComponent(lang)}`;
        }catch(e){
            return url;
        }
    }

    function ytId(url){
        try{
            const u = new URL(url);
            if (u.hostname.includes("youtu.be")) return u.pathname.replace("/", "");
            if (u.searchParams.get("v")) return u.searchParams.get("v");
            const m = u.pathname.match(/\/embed\/([^\/]+)/);
            return m ? m[1] : "";
        }catch(e){
            return "";
        }
    }
    function ytThumb(id){ return id ? `https://i.ytimg.com/vi/${id}/hqdefault.jpg` : ""; }
    function ytEmbedUrl(id){ return id ? `https://www.youtube-nocookie.com/embed/${id}` : ""; }

    async function copyText(text){
        try{
            await navigator.clipboard.writeText(text);
            toast("Скопировано.");
        }catch(e){
            const ta = document.createElement("textarea");
            ta.value = text;
            document.body.appendChild(ta);
            ta.select();
            document.execCommand("copy");
            ta.remove();
            toast("Скопировано.");
        }
    }

    function hookCopyLines(){
        document.querySelectorAll("[data-copy]").forEach(node => {
            if (node.__copyHooked) return;
            node.__copyHooked = true;
            const handler = () => copyText(node.getAttribute("data-copy") || "");
            node.addEventListener("click", handler);
            node.addEventListener("keydown", (e) => {
                if (e.key === "Enter" || e.key === " ") { e.preventDefault(); handler(); }
            });
        });
    }

    /* Reveal on scroll */
    function setupReveal(){
        const items = Array.from(document.querySelectorAll(".reveal"));
        const io = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (e.isIntersecting){
                    e.target.classList.add("in");
                    io.unobserve(e.target);
                }
            });
        }, { root: null, threshold: 0.12, rootMargin: "80px 0px -40px 0px" });

        items.forEach((node, idx) => {
            if (!node.style.transitionDelay && node.closest(".stagger") == null){
                node.style.transitionDelay = Math.min(idx * 30, 180) + "ms";
            }
            io.observe(node);
        });
    }

    /* Modal */
    function openModal(){
        const m = document.getElementById("submitModal");
        m.classList.add("open");
        document.getElementById("sName").focus();
        updateSubmitHint();
    }
    function closeModal(){
        document.getElementById("submitModal").classList.remove("open");
    }

    function buildSubmitText(){
        const name = (document.getElementById("sName").value || "").trim();
        const cls = (document.getElementById("sClass").value || "").trim();
        const grp = (document.getElementById("sGroup").value || "").trim();
        const link = (document.getElementById("sLink").value || "").trim();
        const desc = (document.getElementById("sDesc").value || "").trim();

        const parts = [];
        parts.push("Здравствуйте! Отправляю работу в Desmos.");
        if (name) parts.push(`Имя: ${name}`);
        if (cls) parts.push(`Класс: ${cls}`);
        if (grp) parts.push(`Группа: ${grp}`);
        if (link) parts.push(`Ссылка: ${link}`);
        if (desc) parts.push(`Описание: ${desc}`);
        return parts.join("\n");
    }

    function updateSubmitHint(){
        const name = (document.getElementById("sName").value || "").trim();
        const link = (document.getElementById("sLink").value || "").trim();
        const ok = name && link;
        document.getElementById("submitHint").textContent = ok
            ? "Готово: можно отправлять через WhatsApp или Email."
            : "Заполните минимум: имя ученика и ссылка Desmos.";
        return ok;
    }

    function sendWhatsApp(){
        if (!updateSubmitHint()) { toast("Заполните имя и ссылку."); return; }
        const text = buildSubmitText();
        const url = `https://wa.me/${CONFIG.whatsappPhone}?text=${encodeURIComponent(text)}`;
        window.open(url, "_blank", "noopener");
    }

    function sendEmail(){
        if (!updateSubmitHint()) { toast("Заполните имя и ссылку."); return; }
        const body = buildSubmitText();
        const subject = "Работа Desmos";
        const url = `mailto:${CONFIG.email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        window.location.href = url;
    }

    async function copySubmitText(){
        await copyText(buildSubmitText());
    }

    /* Render videos */
    function renderVideos(list){
        const grid = document.getElementById("videoGrid");
        grid.innerHTML = "";

        for (const v of list){
            const id = ytId(v.url);
            const thumbUrl = ytThumb(id);
            const embed = ytEmbedUrl(id);

            const headLeft = el("div", {}, [
                el("h3", { class:"video-title" }, [v.title || "Видео"]),
                el("div", { class:"video-meta" }, [
                    el("span", { class:"pill" }, ["YouTube"]),
                    v.level ? el("span", { class:"pill" }, [String(v.level)]) : el("span", { class:"pill" }, ["Desmos"])
                ])
            ]);

            const headRight = el("div", { style:"display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end;" }, [
                el("a", { class:"btn", href: v.url, target:"_blank", rel:"noopener" }, ["Открыть"]),
                el("button", { class:"btn", "data-copy": v.url, type:"button" }, ["Копировать"])
            ]);

            const thumb = el("div", { class:"thumb", role:"button", tabindex:"0", "aria-label":"Воспроизвести видео" }, [
                el("div", { class:"play" }, [
                    el("div", { class:"play-btn" }, [
                        el("svg", { viewBox:"0 0 24 24", fill:"none" }, [
                            el("path", { d:"M10 8l7 4-7 4V8z", fill:"rgba(255,255,255,.92)" }, [])
                        ])
                    ])
                ])
            ]);

            if (thumbUrl) thumb.style.backgroundImage = `url('${thumbUrl}')`;

            const playVideo = () => {
                if (!embed) return;
                thumb.replaceWith(el("iframe", {
                    class:"yt-frame",
                    src: embed,
                    title: v.title || "YouTube video",
                    loading:"lazy",
                    allow: "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",
                    allowfullscreen: "true"
                }));
            };

            thumb.addEventListener("click", playVideo);
            thumb.addEventListener("keydown", (e) => {
                if (e.key === "Enter" || e.key === " ") { e.preventDefault(); playVideo(); }
            });

            const card = el("article", { class:"video-card reveal" }, [
                el("div", { class:"video-head" }, [headLeft, headRight]),
                el("div", { class:"video-body" }, [thumb])
            ]);

            grid.appendChild(card);
        }

        hookCopyLines();
    }

    /* Render works (Desmos) with lazy loading */
    let desmosObserver = null;

    function loadDesmosFrame(iframe, placeholder){
        if (iframe.dataset.loaded === "1") return;
        const src = iframe.getAttribute("data-src");
        if (!src) return;
        iframe.dataset.loaded = "1";
        iframe.src = src;
        iframe.addEventListener("load", () => {
            if (placeholder) placeholder.remove();
        }, { once:true });
    }

    function ensureDesmosObserver(){
        if (desmosObserver) return desmosObserver;
        desmosObserver = new IntersectionObserver((entries) => {
            entries.forEach(e => {
                if (!e.isIntersecting) return;
                const iframe = e.target;
                const ph = iframe.closest(".frame")?.querySelector(".frame-placeholder");
                loadDesmosFrame(iframe, ph);
                desmosObserver.unobserve(iframe);
            });
        }, { root: null, threshold: 0.12, rootMargin: "500px 0px 500px 0px" });
        return desmosObserver;
    }

    function renderWorks(list){
        const grid = document.getElementById("workGrid");
        const count = document.getElementById("count");
        grid.innerHTML = "";
        count.textContent = String(list.length);

        const io = ensureDesmosObserver();

        list.forEach((w, idx) => {
            const grade = parseGrade(w.classLabel);
            const embed = normalizeDesmosEmbed(w.url);

            const left = el("div", {}, [
                el("h3", {}, [`№${w.n}. ${w.name}`]),
                el("div", { class:"meta" }, [
                    el("span", { class:"pill" }, [`Класс: ${w.classLabel || "—"}`]),
                    el("span", { class:"pill" }, [`Группа: ${w.group || "—"}`]),
                    el("span", { class:"pill" }, [`Уровень: ${grade ? grade + " класс" : "—"}`]),
                ])
            ]);

            const actions = el("div", { class:"work-actions" }, [
                el("a", { class:"btn", href: w.url, target:"_blank", rel:"noopener" }, ["Открыть"]),
                el("button", { class:"btn", "data-copy": w.url, type:"button" }, ["Копировать"])
            ]);

            const iframe = el("iframe", {
                class:"desmos",
                title: `${w.name} — работа №${w.n}`,
                loading:"lazy",
                referrerpolicy:"no-referrer-when-downgrade",
                allowfullscreen:"true",
                src:"about:blank",
                "data-src": embed
            });

            const placeholder = el("div", { class:"frame-placeholder" }, [
                el("div", { class:"ph-inner" }, [
                    el("div", { class:"ph-title" }, ["График Desmos"]),
                    el("div", { class:"ph-sub" }, ["Загрузится автоматически при прокрутке или по кнопке."]),
                    el("button", { class:"btn primary", type:"button" }, ["Загрузить"])
                ])
            ]);

            placeholder.querySelector("button").addEventListener("click", () => loadDesmosFrame(iframe, placeholder));

            const frame = el("div", { class:"frame" }, [iframe, placeholder]);

            // First 1–2: load immediately (приятнее UX)
            if (idx < 2){
                loadDesmosFrame(iframe, placeholder);
            }else{
                io.observe(iframe);
            }

            const work = el("article", {
                class:"work reveal",
                "data-grade": grade,
                "data-group": w.group || "",
                "data-search": `${w.n} ${w.name} ${w.classLabel} ${w.group} ${w.title} ${w.desc}`.toLowerCase()
            }, [
                el("div", { class:"work-head" }, [left, actions]),
                el("div", { class:"work-body" }, [
                    el("div", { style:"font-weight:650; font-size:13px;" }, [w.title || "Работа"]),
                    el("div", { class:"desc" }, [w.desc || ""]),
                    frame
                ])
            ]);

            grid.appendChild(work);
        });

        hookCopyLines();
    }

    let STUDENT_WORKS = [];
    let VIDEO_MATERIALS = [];

    function applyFilters(){
        const q = (document.getElementById("q").value || "").trim().toLowerCase();
        const grade = document.getElementById("grade").value;
        const group = document.getElementById("group").value;

        const filtered = STUDENT_WORKS.filter(w => {
            const g = parseGrade(w.classLabel);
            const inQ = !q || (`${w.n} ${w.name} ${w.classLabel} ${w.group} ${w.title} ${w.desc}`.toLowerCase().includes(q));
            const inGrade = !grade || g === grade;
            const inGroup = !group || String(w.group || "") === String(group);
            return inQ && inGrade && inGroup;
        });

        renderWorks(filtered);
        setupReveal(); // новые карточки тоже анимируем
    }

    (async function init(){
        STUDENT_WORKS = await loadJson("students.json", "studentsData");
        VIDEO_MATERIALS = await loadJson("videos.json", "videosData");

        renderVideos(VIDEO_MATERIALS);
        renderWorks(STUDENT_WORKS);

        document.getElementById("q").addEventListener("input", applyFilters);
        document.getElementById("grade").addEventListener("change", applyFilters);
        document.getElementById("group").addEventListener("change", applyFilters);
        document.getElementById("reset").addEventListener("click", () => {
            document.getElementById("q").value = "";
            document.getElementById("grade").value = "";
            document.getElementById("group").value = "";
            applyFilters();
        });

        document.getElementById("openSubmit").addEventListener("click", openModal);
        document.getElementById("openSubmitTop").addEventListener("click", openModal);
        document.getElementById("openSubmitContact").addEventListener("click", openModal);

        document.getElementById("closeModal").addEventListener("click", closeModal);
        document.getElementById("submitModal").addEventListener("click", (e) => {
            if (e.target.id === "submitModal") closeModal();
        });
        window.addEventListener("keydown", (e) => {
            if (e.key === "Escape") closeModal();
        });

        ["sName","sClass","sGroup","sLink","sDesc"].forEach(id => {
            document.getElementById(id).addEventListener("input", updateSubmitHint);
        });

        document.getElementById("sendWhatsApp").addEventListener("click", sendWhatsApp);
        document.getElementById("sendEmail").addEventListener("click", sendEmail);
        document.getElementById("copyText").addEventListener("click", copySubmitText);

        const burger = document.getElementById("burger");
        const mobileNav = document.getElementById("mobileNav");
        burger?.addEventListener("click", () => mobileNav.classList.toggle("open"));
        mobileNav?.querySelectorAll("a").forEach(a => a.addEventListener("click", () => mobileNav.classList.remove("open")));

        const toTop = document.getElementById("toTop");
        window.addEventListener("scroll", () => {
            if (window.scrollY > 600) toTop.classList.add("show");
            else toTop.classList.remove("show");
        });

        setupReveal();
        hookCopyLines();
    })();
</script>
</body>
</html>
